<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docs | Automa√ß√£o Lever Media</title>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Mermaid JS -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

    <style>
        :root {
            /* Cores Lever Media (Adaptadas para Light Mode) */
            --primary-color: #00aabf; 
            --primary-bg: #e6fcfd; 
            
            --bg-body: #f3f4f6; 
            --bg-paper: #ffffff; 
            --bg-sidebar: #ffffff;
            
            --text-main: #1f2937; 
            --text-muted: #6b7280; 
            
            --border-color: #e5e7eb;
            --code-bg: #1e293b; 
            --code-text: #e2e8f0;

            --sidebar-width: 260px;
            --content-width: 900px; 
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            display: flex;
            min-height: 100vh;
            line-height: 1.6;
        }

        /* --- Sidebar --- */
        aside {
            width: var(--sidebar-width);
            background-color: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            background-color: #fafafa;
        }

        .brand {
            font-size: 1.4rem;
            font-weight: 800;
            color: #111;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .brand span { color: #00C8E6; }

        .nav-content {
            padding: 1.5rem;
            overflow-y: auto;
            flex: 1;
        }

        aside nav ul { list-style: none; }
        .nav-group { margin-bottom: 2rem; }

        .nav-header {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-muted);
            font-weight: 700;
            margin-bottom: 0.75rem;
            letter-spacing: 0.5px;
        }

        aside nav a {
            text-decoration: none;
            color: var(--text-main);
            font-size: 0.95rem;
            display: block;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.25rem;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        aside nav a:hover {
            background-color: var(--bg-body);
            color: var(--primary-color);
            border-left-color: var(--primary-color);
        }

        /* --- Main Content --- */
        main {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 3rem 2rem;
            display: flex;
            justify-content: center; 
        }

        .container {
            width: 100%;
            max-width: var(--content-width);
            background-color: var(--bg-paper);
            padding: 4rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            border: 1px solid var(--border-color);
        }

        h1 { font-size: 2.25rem; font-weight: 800; margin-bottom: 1.5rem; color: #111; letter-spacing: -1px; }
        h2 { 
            font-size: 1.5rem; 
            font-weight: 700; 
            margin: 3rem 0 1rem; 
            color: #1f2937; 
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
            scroll-margin-top: 2rem;
        }
        h3 { font-size: 1.15rem; font-weight: 600; margin: 2rem 0 0.75rem; color: #374151; }
        
        p, li { font-size: 1rem; color: #4b5563; margin-bottom: 1rem; }
        ul, ol { margin-left: 1.5rem; margin-bottom: 1.5rem; }
        li { margin-bottom: 0.5rem; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        th, td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { background-color: #f9fafb; font-weight: 600; color: #374151; font-size: 0.9rem; }
        td { font-size: 0.9rem; }
        tr:last-child td { border-bottom: none; }

        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        
        code { font-family: 'JetBrains Mono', monospace; }

        p > code, li > code {
            background-color: var(--bg-body);
            color: #d946ef; 
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.85rem;
            border: 1px solid #e5e7eb;
        }

        /* Callouts */
        .callout {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid;
            background-color: #fff;
        }

        .callout.info { background-color: #eff6ff; border-color: #3b82f6; }
        .callout.info strong { color: #1e40af; }
        
        .callout.warning { background-color: #fffbeb; border-color: #f59e0b; }
        .callout.warning strong { color: #92400e; }
        
        .callout.danger { background-color: #fef2f2; border-color: #ef4444; }
        .callout.danger strong { color: #991b1b; }

        /* Mermaid Wrapper & Zoom */
        .mermaid-wrapper {
            position: relative;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: #f8fafc;
            transition: border-color 0.2s;
            cursor: zoom-in;
        }

        .mermaid-wrapper:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .mermaid {
            padding: 1.5rem;
            display: flex;
            justify-content: center;
        }

        .zoom-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            pointer-events: none;
        }

        /* Modal / Lightbox */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            padding: 2rem;
            animation: fadeIn 0.2s ease-out;
        }

        .modal.active { display: flex; }

        .modal-content {
            width: 95%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: auto;
        }

        .modal-content svg {
            max-width: 100% !important;
            height: auto !important;
            max-height: 90vh !important;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            background: #f3f4f6;
            border: none;
            font-size: 2rem;
            line-height: 1;
            padding: 0.5rem;
            cursor: pointer;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            transition: background 0.2s;
        }

        .modal-close:hover { background: #e5e7eb; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Mobile Button */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 200;
            background: white;
            color: #333;
            border: 1px solid #ccc;
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        @media (max-width: 768px) {
            aside { transform: translateX(-100%); }
            aside.open { transform: translateX(0); box-shadow: 5px 0 15px rgba(0,0,0,0.1); }
            main { margin-left: 0; padding: 1.5rem; }
            .container { padding: 2rem 1.5rem; }
            .menu-toggle { display: block; }
        }
    </style>
</head>
<body>

    <button class="menu-toggle" onclick="document.querySelector('aside').classList.toggle('open')">‚ò∞</button>

    <aside>
        <div class="sidebar-header">
            <div class="brand">LEVER<span>MEDIA</span></div>
        </div>
        
        <div class="nav-content">
            <nav>
                <div class="nav-group">
                    <div class="nav-header">Introdu√ß√£o</div>
                    <a href="#visao-geral">Vis√£o Geral</a>
                    <a href="#requisitos">Pr√©-requisitos</a>
                </div>

                <div class="nav-group">
                    <div class="nav-header">Opera√ß√£o</div>
                    <a href="#telegram">Comandos Telegram</a>
                    <a href="#regras-midia">Regras de M√≠dia</a>
                    <a href="#login">Manuten√ß√£o & Login</a>
                </div>

                <div class="nav-group">
                    <div class="nav-header">Suporte</div>
                    <a href="#erros">Erros Comuns</a>
                </div>
            </nav>
        </div>
    </aside>

    <main>
        <div class="container">
            <section id="visao-geral">
                <h1>Documenta√ß√£o T√©cnica - Automa√ß√£o de Postagens Lever Media</h1>
                <p>Bem-vindo √† documenta√ß√£o oficial do fluxo de m√≠dia do Barone. Este sistema conecta o <strong>ClickUp</strong> ao <strong>Google Drive</strong> para distribuir conte√∫do automaticamente no YouTube, Facebook, Instagram e TikTok.</p>
                
                <!-- Mermaid Wrapper com Zoom -->
                <div class="mermaid-wrapper" onclick="openModal()">
                    <div class="zoom-badge">üîç Clique para ampliar</div>
                    <div class="mermaid">
                        %%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#e6fcfd', 'edgeLabelBackground':'#fff', 'tertiaryColor': '#fff'}}}%%
                        graph LR
            A[Telegram: /agendar_card] --> B(ClickUp: Leitura);
            B --> C{Arquivos no Drive?};
            C -->|Sim| D[Processamento];
            C -->|N√£o| X[Erro: Arquivos n√£o encontrados];
            D --> E[Telegram: Aprovar?];
            E -->|Sim| F{Distribui√ß√£o};
            F --> G[YouTube];
            F --> H[Meta FB/IG];
            F --> I[TikTok];
            G & H & I --> J[Logs & ClickUp];
                    </div>
                </div>
            </section>

            <section id="requisitos">
                <h2>Pr√©-requisitos e Arquivos</h2>
                <p>Para garantir o funcionamento, √© fundamental que os arquivos e o ClickUp estejam preenchidos corretamente.</p>

                <div class="callout info">
                    <strong>‚ö†Ô∏è Regra de Ouro (Arquivo √önico):</strong><br>
                    Para evitar que a automa√ß√£o selecione o v√≠deo errado, certifique-se de ter <strong>apenas 1 arquivo de v√≠deo</strong> na pasta <code>export</code> e <strong>1 arquivo de imagem</strong> na pasta <code>thumb</code>.<br><br>
                    <em>Caso haja mais de um, o sistema tentar√° escolher o maior arquivo ou o que contiver "PT/BR" no nome, mas a precis√£o n√£o √© garantida.</em>
                </div>

                <h3>Estrutura de Pastas (Google Drive)</h3>
                <p>O sistema <strong>n√£o l√™</strong> arquivos na raiz da pasta linkada. Eles devem estar organizados assim:</p>

                <table>
                    <thead>
                        <tr>
                            <th style="width: 20%">Tipo</th>
                            <th style="width: 35%">Diret√≥rio Obrigat√≥rio</th>
                            <th style="width: 45%">Requisitos</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>V√≠deo</strong></td>
                            <td><code>/export</code></td>
                            <td>
                                ‚Ä¢ Formato: <code>.mp4</code><br>
                                ‚Ä¢ Tamanho M√°x: <strong>1GB</strong>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Thumbnail</strong></td>
                            <td><code>/thumb</code></td>
                            <td>
                                ‚Ä¢ Formato: <code>.jpg</code> ou <code>.png</code><br>
                                ‚Ä¢ Tamanho Ideal: <strong>&lt; 2MB</strong><br>
                                <small style="color:#666">(O sistema tenta comprimir at√© 7MB, mas evite arquivos maiores)</small>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h3>Preenchimento no ClickUp</h3>
                <ul>
                    <li><strong>Link:</strong> Deve ser o link da pasta principal do Drive (que cont√©m as subpastas <code>export</code> e <code>thumb</code>).</li>
                    <li><strong>Data de Postagem:</strong> Campo de data/hora deve estar preenchido.</li>
                    <li><strong>T√≠tulo:</strong> Definido no campo personalizado.</li>
                    <li><strong>Legenda (IMPORTANTE):</strong> Todos os <strong>links de produtos e sorteios</strong> devem ser inseridos aqui. A automa√ß√£o l√™ este campo para identificar o que colocar no coment√°rio fixado ou avisar sobre "Link na Bio".</li>
                </ul>
            </section>

            <section id="telegram">
                <h2>Comandos do Telegram</h2>
                <p>A interface de controle √© feita pelo chat do Telegram.</p>

                <div class="callout info">
                    <strong>Nota:</strong> O comando de agendamento em lote (<code>/agendar</code>) foi desabilitado. Use o comando por Card ID.
                </div>

                <h3>Iniciar Automa√ß√£o</h3>
                <p>Para processar um v√≠deo espec√≠fico:</p>
                <pre><code>/agendar_card [ID_DO_CARD]</code></pre>
                <p>Exemplo: <code>/agendar_card 86acxhybw</code></p>

                <h3>Recuperar Falhas (Retry)</h3>
                <p>Caso ocorra um erro de API, o sistema enviar√° um ID de execu√ß√£o. Use-o para reiniciar do ponto de falha:</p>
                <pre><code>/retry [ID_DA_EXECUCAO]</code></pre>
            </section>

            <section id="regras-midia">
                <h2>Regras de M√≠dia</h2>
                
                <h3>1. Sorteios (Tags)</h3>
                <p>O comportamento padr√£o envia para os canais principais. Para enviar para os canais de <strong>Pr√™mios</strong>, inclua a flag:</p>
                <ul>
                    <li><strong>Tag <code>sorteio</code>:</strong> 
                        <ul>
                            <li>YouTube ‚Üí Canal <em>Barone Pr√™mios</em>.</li>
                            <li>Instagram ‚Üí Conta <em>@eusoubarone2</em>.</li>
                        </ul>
                    </li>
                </ul>

                <h3>2. Internacional</h3>
                <p>Identificado automaticamente se houver preenchimento no campo "P√°gina INT".</p>
                <ul>
                    <li><strong>YouTube:</strong> <em>SoyElBarone Shorts</em> e <em>SoyElBarone Vertical</em>.</li>
                    <li><strong>Facebook:</strong> <em>SoyElBarone</em>.</li>
                </ul>

                <h3>3. Links e Legendas</h3>
                <p>O sistema converte links automaticamente:</p>
                <ul>
                    <li><strong>Instagram/TikTok:</strong> Remove links do texto e substitui por chamadas "Link na Bio".</li>
                    <li><strong>Facebook/YouTube:</strong> Mant√©m os links clic√°veis e insere links de produtos nos coment√°rios quando detectado na legenda.</li>
                </ul>
            </section>

            <section id="login">
                <h2>Manuten√ß√£o e Login</h2>
                <div class="callout warning">
                    <strong>Alerta Semanal:</strong> As credenciais do YouTube expiram a cada 7 dias. Um aviso √© enviado toda segunda-feira.
                </div>
                
                <p>Envie <code>/login</code> no Telegram para renovar. Ao logar nas contas do YouTube, siga <strong>estritamente</strong> esta ordem:</p>
                
                <ol>
                    <li><strong>Barone Vertical</strong>: Selecione a conta <em>Barone TV</em>.</li>
                    <li><strong>Barone Shorts</strong>: Selecione a conta <em>Barone Shorts</em>.</li>
                    <li><strong>Barone Pr√™mios</strong>: Selecione a conta <em>Barone Pr√™mios</em>.</li>
                    <li><strong>SoyElBarone Shorts</strong>: Selecione o <strong>2¬∫ MotorLab</strong> da lista (pen√∫ltima conta).</li>
                    <li><strong>SoyElBarone Vertical</strong>: Selecione a conta <em>SoyElBarone Vertical</em>.</li>
                </ol>
            </section>

            <section id="erros">
                <h2>Erros Comuns e Solu√ß√µes</h2>
                <p>Abaixo est√£o as mensagens de erro reais que o sistema pode retornar e como resolv√™-las.</p>

                <div class="callout danger">
                    <strong>ERRO: API do Instagram</strong><br>
                    <em style="font-size:0.9em; display:block; margin: 0.5rem 0;">"O container do Instagram n√£o est√° no status adequado para receber o v√≠deo."</em>
                    <hr style="border:0; border-top:1px solid #fecaca; margin: 0.5rem 0;">
                    <strong>Solu√ß√£o:</strong> Verifique se o container foi criado e est√° em status ‚ÄúREADY‚Äù antes de fazer o upload; aguarde a mudan√ßa de status ou recrie o container e tente novamente.
                </div>

                <div class="callout danger">
                    <strong>ERRO: Tamanho/URL do V√≠deo (Facebook)</strong><br>
                    <em style="font-size:0.9em; display:block; margin: 0.5rem 0;">"N√£o foi poss√≠vel buscar o arquivo de v√≠deo da URL fornecida para o Facebook."</em>
                    <hr style="border:0; border-top:1px solid #fecaca; margin: 0.5rem 0;">
                    <strong>Solu√ß√£o:</strong> Verifique se o campo ‚Äúvideo_download_link‚Äù cont√©m um URL v√°lido e acess√≠vel publicamente (link direto para o arquivo .mp4). Corrija ou substitua o link e execute novamente o fluxo.
                </div>

                <div class="callout warning">
                    <strong>AVISO: Thumbnail n√£o ajustada</strong><br>
                    <em style="font-size:0.9em; display:block; margin: 0.5rem 0;">"Thumbnail n√£o ajustada automaticamente (tamanho maior que o permitido)"</em>
                    <hr style="border:0; border-top:1px solid #fcd34d; margin: 0.5rem 0;">
                    <strong>Solu√ß√£o:</strong> O v√≠deo foi postado, mas a thumb falhou. A imagem original era >7MB e a compress√£o falhou. Ajuste manualmente no YouTube Studio/TikTok.
                </div>

                <p style="margin-top: 2rem; font-size: 0.9rem; color: #666;">
                    Todos os logs detalhados est√£o dispon√≠veis na <a href="https://docs.google.com/spreadsheets/d/1Te2o5GMzHeHuDUX_FutjiHtIH7_kXgFqRuJg-q3vF6I" target="_blank" style="color: var(--primary-color); text-decoration: none; font-weight: 600;">Planilha de Controle</a>.
                </p>
            </section>
        </div>
    </main>

    <!-- Modal de Zoom -->
    <div id="diagramModal" class="modal" onclick="closeModal(event)">
        <button class="modal-close" onclick="closeModal(event)">√ó</button>
        <div class="modal-content" id="modalContent">
            <!-- O SVG ser√° injetado aqui -->
        </div>
    </div>

    <script>
        // Inicializa Mermaid
        mermaid.initialize({ startOnLoad: true });

        // Mobile Menu
        document.querySelectorAll('aside a').forEach(link => {
            link.addEventListener('click', () => {
                if(window.innerWidth <= 768) {
                    document.querySelector('aside').classList.remove('open');
                }
            });
        });

        // Fun√ß√µes do Modal de Zoom
        function openModal() {
            const originalSvg = document.querySelector('.mermaid svg');
            if (originalSvg) {
                const clonedSvg = originalSvg.cloneNode(true);
                clonedSvg.removeAttribute('height');
                clonedSvg.style.maxWidth = '100%';
                
                const modalContent = document.getElementById('modalContent');
                modalContent.innerHTML = ''; 
                modalContent.appendChild(clonedSvg);
                
                document.getElementById('diagramModal').classList.add('active');
                document.body.style.overflow = 'hidden'; 
            }
        }

        function closeModal(event) {
            if (event.target.id === 'diagramModal' || event.target.classList.contains('modal-close')) {
                document.getElementById('diagramModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                document.getElementById('diagramModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });
    </script>
</body>
</html>
